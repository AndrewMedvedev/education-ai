import asyncio
import logging

from src.features.teacher.course_creation.ai_agent.workflow import agent

INTERVIEW_SUMMARY = """\
## 1. Название курса
 - Инженерия программного обеспечения

## 2. Целевая аудитория (самое точное описание, которое дал эксперт)
- Возраст / опыт / бэкграунд: Студенты 3 курса IT-направлений
- Главные боли / проблемы / мотивации: Не понимают, как переходить от простых учебных проектов к реальной разработке; склонны к излишнему усложнению кода
- Что уже умеют (реальный стартовый уровень): Базовое знание Git, умеют разрабатывать ToDo-приложение с использованием ООП и MVC
- Что категорически НЕ умеют / не понимают: Как проектировать архитектуру без перебора (overengineering), как применять практики инженерии ПО в реальных условиях

## 3. Продолжительность и примерный размер курса
 - Не более 3 модулей, рассчитанных на пару недель при размеренном темпе изучения

## 4. Главные учебные цели курса (5–8 самых важных)
1. Понять жизненный цикл программного обеспечения и этапы разработки
2. Уметь читать и проектировать архитектуру на уровне компонентов
3. Научиться проектировать собственные проекты без излишнего усложнения (overengineering)
4. Понять, как принимать архитектурные решения на основе текущих, а не гипотетических требований

## 5. Рекомендуемая структура курса (блоки / модули)
1. Жизненный цикл ПО и основы инженерии
2. Архитектура на уровне компонентов: как читать и проектировать
3. Избегание overengineering: практики простого и эффективного проектирования

## 6. Ключевые темы / подтемы (то, без чего курс невозможен)
- Модуль 1: Жизненный цикл ПО и основы инженерии
  • Этапы жизненного цикла: анализ, проектирование, разработка, тестирование, сопровождение
  • Отличие инженерии ПО от простого программирования
  • Роль документации, планирования и процессов
- Модуль 2: Архитектура на уровне компонентов
  • Что такое компонент и границы модульности
  • Примеры архитектурных решений в типичных приложениях
  • Как читать и строить диаграммы компонентов
  • Связь с MVC и расширение за его пределы
- Модуль 3: Избегание overengineering
  • Что такое overengineering и как он проявляется
  • Принцип "You Aren’t Gonna Need It" (YAGNI)
  • Построение архитектуры под текущие задачи, а не гипотетические
  • Примеры: от простого ToDo до масштабируемой структуры — когда и зачем переходить

## 7. Самые частые заблуждения / типичные ошибки учеников
- Пишут избыточно сложный код "на будущее", вместо решения текущей задачи — возникает из-за страха перед масштабированием и непонимания, что изменения можно вносить по мере роста
- Считают, что хорошая архитектура = много слоёв и паттернов — путают сложность с качеством, не понимая цели абстракций
- Не видят границ компонентов — смешивают логику, данные и UI, потому что не учились мыслить на уровне модульности

## 8. Лучшие практические примеры / кейсы / задачи
- Задача: взять простое ToDo-приложение и рефакторить его в компонентную структуру (например, выделить модули: UI, Storage, Business Logic)
- Кейс: показать, как изначально простое приложение начинают "распухать" из-за попыток сделать его "масштабируемым", и сравнить с пошаговым развитием по мере роста требований
- Практика: предложить студентам спроектировать приложение "Заметки с тегами" — сначала минимально, потом обсудить, какие улучшения возможны при росте, и какие — пока не нужны

## 9. Способы проверки понимания (если упоминались)
- не получено от эксперта

## 10. Важные акценты / подводные камни / «ловушки» материала
- Акцент на том, что архитектура — это не про диаграммы, а про принятие решений и управление сложностью
- Подчеркивать, что простота — признак зрелости, а не слабости
- Избегать теоретизирования: всё объяснять на примерах из реальных (даже простых) проектов
- Не давать шаблонов "как надо", а учить оценивать контекст и принимать взвешенные решения

## 11. Пропущенные важные блоки (чего не хватило в интервью)
- Эксперт не дал конкретики по формату проверочных заданий и критериям оценки
- Не упомянуты инструменты (например, диаграммы UML, C4, Notion/Draw.io)
- Не затронуты командная работа, ревью кода, документирование архитектуры — хотя это часть инженерии ПО
- Не сказано, будет ли практика с Git, CI/CD или тестированием — только косвенно через контекст

## 12. Краткая выжимка «одним абзацем»
Курс «Инженерия программного обеспечения» учит студентов 3 курса IT-направлений переходить от простых учебных проектов к осознанной разработке, понимая жизненный цикл ПО и компонентную архитектуру. Основной акцент — на практическом проектировании без излишнего усложнения, с фокусом на текущих задачах. Курс состоит из трёх модулей: жизненный цикл, архитектура компонентов и борьба с overengineering, и должен помочь студентам мыслить как инженеры, а не просто программисты.
"""  # noqa: E501


async def main() -> None:
    result = await agent.ainvoke({
        "user_id": 1,
        "interview_with_teacher": INTERVIEW_SUMMARY
    })
    print(result)


if __name__ == "__main__":
    logging.basicConfig(level=logging.INFO)
    asyncio.run(main())
